syntax = "proto3";

option csharp_namespace = "Spravy.ToDo.Protos";

import "google/protobuf/timestamp.proto";
import "google/protobuf/duration.proto";

package spravy.to_do;

message ToDoItemToStringRequest {
  bytes Id = 1;
}

message ToDoItemToStringReply {
    string Value = 1;
}

message ToDoItemToRootRequest {
  bytes Id = 1;
}

message ToDoItemToRootReply {
}

message UpdateToDoItemParentRequest {
  bytes Id = 1;
  bytes ParentId = 2;
}

message UpdateToDoItemParentReply {
}

message GetToDoSelectorItemsRequest {
}

message GetToDoSelectorItemsReply {
  repeated ToDoSelectorItemGrpc Items = 1;
}

message ToDoSelectorItemGrpc {
  bytes Id = 1;
  string Name = 2;
  repeated ToDoSelectorItemGrpc Children = 3;
}

message GetLeafToDoSubItemsRequest {
  bytes Id = 1;
}

message GetLeafToDoSubItemsReply {
  repeated ToDoSubItemGrpc Items = 1;
}

message UpdateToDoItemWeeklyPeriodicityRequest {
  bytes Id = 1;
  WeeklyPeriodicityGrpc Periodicity = 2;
}

message UpdateToDoItemWeeklyPeriodicityReply {
}

message UpdateToDoItemMonthlyPeriodicityRequest {
  bytes Id = 1;
  MonthlyPeriodicityGrpc Periodicity = 2;
}

message UpdateToDoItemMonthlyPeriodicityReply {
}

message UpdateToDoItemAnnuallyPeriodicityRequest {
  bytes Id = 1;
  AnnuallyPeriodicityGrpc Periodicity = 2;
}

message UpdateToDoItemAnnuallyPeriodicityReply {
}

message ActiveToDoItemGrpc {
  bytes Id = 1;
  string Name = 2;
}

message GetCurrentToDoItemsRequest {
}

message GetCurrentToDoItemsReply {
  repeated ToDoSubItemGrpc Items = 1;
}

message RemoveCurrentToDoItemRequest {
  bytes Id = 1;
}

message RemoveCurrentToDoItemReply {
}

message AddCurrentToDoItemRequest {
  bytes Id = 1;
}

message AddCurrentToDoItemReply {
}

message SearchToDoSubItemsRequest {
  string SearchText = 1;
}

message SearchToDoSubItemsReply {
  repeated ToDoSubItemGrpc Items = 1;
}

message FailToDoItemRequest {
  bytes Id = 1;
}

message FailToDoItemReply {
}

message SkipToDoItemRequest {
  bytes Id = 1;
}

message SkipToDoItemReply {
}

message UpdateToDoItemDescriptionRequest {
  bytes Id = 1;
  string Description = 2;
}

message UpdateToDoItemDescriptionReply {
}

message UpdateToDoItemOrderIndexRequest {
  bytes Id = 1;
  bytes TargetId = 2;
  bool IsAfter = 3;
}

message UpdateToDoItemOrderIndexReply {
}

message UpdateToDoItemTypeRequest {
  bytes Id = 1;
  ToDoItemTypeGrpc Type = 2;
}

message UpdateToDoItemTypeReply {
  
}

message UpdateToDoItemNameRequest {
  bytes Id = 1;
  string Name = 2;
}

message UpdateToDoItemNameReply {
}

message UpdateToDoItemCompleteStatusRequest {
  bytes Id = 1;
  bool IsCompleted = 2;
}

message UpdateToDoItemCompleteStatusReply {
}

message UpdateToDoItemDueDateRequest {
  bytes Id = 1;
  DateTimeOffsetGrpc DueDate = 2;
}

message UpdateToDoItemDueDateReply {
}

message UpdateToDoItemTypeOfPeriodicityRequest {
  bytes Id = 1;
  TypeOfPeriodicityGrpc Type = 2;
}

message UpdateToDoItemTypeOfPeriodicityReply {
}

message DeleteToDoItemRequest {
  bytes Id = 1;
}

message DeleteToDoItemReply {
}

message AddToDoItemRequest {
  bytes ParentId = 1;
  string Name = 2;
}

message AddToDoItemReply {
  bytes Id = 1;
}

message AddRootToDoItemRequest {
  string Name = 1;
}

message AddRootToDoItemReply {
  bytes Id = 1;
}

message GetToDoItemRequest {
  bytes Id = 1;
}

message GetToDoItemReply {
  ToDoItemGrpc Item = 1;
}

message ToDoItemGrpc {
  bytes Id = 1;
  string Name = 2;
  repeated ToDoSubItemGrpc Items = 3;
  repeated ToDoItemParentGrpc Parents = 4;
  string Description = 5;
  bool IsCurrent = 8;

  oneof Parameters {
    ToDoItemValueGrpc Value = 6;
    ToDoItemGroupGrpc Group = 7;
    ToDoItemPlannedGrpc Planned = 9;
    ToDoItemPeriodicityGrpc Periodicity = 10;
  }
}

message ToDoItemPlannedGrpc {
  DateTimeOffsetGrpc DueDate = 1;
  bool IsCompleted = 2;
  uint32 CompletedCount = 3;
  uint32 SkippedCount = 4;
  uint32 FailedCount = 5;
}

message ToDoItemPeriodicityGrpc {
  DateTimeOffsetGrpc DueDate = 1;

  oneof Periodicity {
    DailyPeriodicityGrpc Daily = 2;
    WeeklyPeriodicityGrpc Weekly = 3;
    MonthlyPeriodicityGrpc Monthly = 4;
    AnnuallyPeriodicityGrpc Annually = 5;
  }
}

message ToDoItemGroupGrpc {
}

message GetRootToDoSubItemsRequest {
}

message GetRootToDoSubItemsReply {
  repeated ToDoSubItemGrpc Items = 1;
}

message ToDoSubItemGrpc {
  bytes Id = 1;
  string Name = 2;
  uint32 OrderIndex = 3;
  ToDoItemStatusGrpc Status = 4;
  string Description = 5;
  bool IsCurrent = 8;
  ActiveToDoItemGrpc Active = 9;
  DateTimeOffsetGrpc LastCompleted = 12; 

  oneof Parameters {
    ToDoSubItemValueGrpc Value = 6;
    ToDoSubItemGroupGrpc Group = 7;
    ToDoSubItemPlannedGrpc Planned = 10;
    ToDoSubItemPeriodicityGrpc Periodicity = 11;
  }
}

message ToDoSubItemPeriodicityGrpc {
  DateTimeOffsetGrpc DueDate = 1;
  uint32 CompletedCount = 2;
  uint32 SkippedCount = 3;
  uint32 FailedCount = 4;

  oneof Periodicity {
    DailyPeriodicityGrpc Daily = 5;
    WeeklyPeriodicityGrpc Weekly = 6;
    MonthlyPeriodicityGrpc Monthly = 7;
    AnnuallyPeriodicityGrpc Annually = 8;
  }
}

message ToDoSubItemPlannedGrpc {
  bool IsCompleted = 1;
  DateTimeOffsetGrpc DueDate = 2;
  uint32 CompletedCount = 3;
  uint32 SkippedCount = 4;
  uint32 FailedCount = 5;
}

message ToDoSubItemGroupGrpc {
}

message ToDoSubItemValueGrpc {
  bool IsCompleted = 1;
  uint32 CompletedCount = 2;
  uint32 SkippedCount = 3;
  uint32 FailedCount = 4;
}

message ToDoItemParentGrpc {
  bytes Id = 1;
  string Name = 2;
}

message ToDoItemValueGrpc {
  DateTimeOffsetGrpc DueDate = 1;
  bool IsCompleted = 2;
}

message DateTimeOffsetGrpc {
  google.protobuf.Timestamp Date = 1;
  google.protobuf.Duration Offset = 2;
}

enum TypeOfPeriodicityGrpc {
  Daily = 0;
  Weekly = 1;
  Monthly = 2;
  Annually = 3;
}

message DailyPeriodicityGrpc {
}

message MonthlyPeriodicityGrpc {
  bytes Days = 1;
}

message WeeklyPeriodicityGrpc {
  repeated DayOfWeekGrpc Days = 1;
}

message AnnuallyPeriodicityGrpc {
  repeated DayOfYearGrpc Days = 1;
}

message DayOfYearGrpc {
  uint32 Month = 1;
  uint32 Day = 2;
}

enum DayOfWeekGrpc {
  Sunday = 0;
  Monday = 1;
  Tuesday = 2;
  Wednesday = 3;
  Thursday = 4;
  Friday = 5;
  Saturday = 6;
}

enum ToDoItemStatusGrpc {
  Miss = 0;
  ReadyForComplete = 1;
  Completed = 2;
}

enum ToDoItemTypeGrpc {
  Value = 0;
  Group = 1;
  Planned = 2;
  Periodicity = 3;
}
